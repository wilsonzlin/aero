[
  {
    "name": "48kHz_small_deltas_and_duplicates",
    "sample_rate_hz": 48000,
    "start_time_ns": 0,
    "steps": [
      0,
      1,
      101,
      20934,
      20935,
      41768,
      61768,
      61769,
      62769,
      62769,
      30062769,
      30062769,
      30083602
    ],
    "expected_frames_per_step": [
      0,
      0,
      0,
      1,
      0,
      1,
      0,
      0,
      1,
      0,
      1440,
      0,
      1
    ],
    "expected_final_frac": 12896000
  },
  {
    "name": "48kHz_backwards_time_is_ignored",
    "sample_rate_hz": 48000,
    "start_time_ns": 1000,
    "steps": [
      21833,
      21834,
      21000,
      21835
    ],
    "expected_frames_per_step": [
      0,
      1,
      0,
      0
    ],
    "expected_final_frac": 80000
  },
  {
    "name": "48kHz_jittery_ticks_60Hz_16666666_16666667",
    "sample_rate_hz": 48000,
    "start_time_ns": 0,
    "steps": [
      16666666,
      33333333,
      50000000,
      66666666,
      83333333,
      100000000,
      116666666
    ],
    "expected_frames_per_step": [
      799,
      800,
      801,
      799,
      800,
      801,
      799
    ],
    "expected_final_frac": 999968000
  },
  {
    "name": "48kHz_jittery_60Hz_40x16666667_20x16666666_full_second",
    "sample_rate_hz": 48000,
    "start_time_ns": 0,
    "steps": [
      16666667,
      33333333,
      50000000,
      66666666,
      83333333,
      99999999,
      116666666,
      133333332,
      149999999,
      166666665,
      183333332,
      199999998,
      216666665,
      233333331,
      249999998,
      266666664,
      283333331,
      299999997,
      316666664,
      333333330,
      349999997,
      366666663,
      383333330,
      399999996,
      416666663,
      433333329,
      449999996,
      466666662,
      483333329,
      499999995,
      516666662,
      533333328,
      549999995,
      566666661,
      583333328,
      599999994,
      616666661,
      633333327,
      649999994,
      666666660,
      683333327,
      699999994,
      716666661,
      733333328,
      749999995,
      766666662,
      783333329,
      799999996,
      816666663,
      833333330,
      849999997,
      866666664,
      883333331,
      899999998,
      916666665,
      933333332,
      949999999,
      966666666,
      983333333,
      1000000000
    ],
    "expected_frames_per_step": [
      800,
      799,
      801,
      799,
      800,
      800,
      800,
      800,
      800,
      800,
      800,
      800,
      800,
      800,
      800,
      800,
      800,
      800,
      800,
      800,
      800,
      800,
      800,
      800,
      800,
      800,
      800,
      800,
      800,
      800,
      800,
      800,
      800,
      800,
      800,
      800,
      800,
      800,
      800,
      800,
      800,
      800,
      800,
      800,
      800,
      800,
      800,
      800,
      800,
      800,
      800,
      800,
      800,
      800,
      800,
      800,
      800,
      800,
      800,
      801
    ],
    "expected_final_frac": 0
  },
  {
    "name": "48kHz_jittery_ticks_variable_frames",
    "sample_rate_hz": 48000,
    "start_time_ns": 0,
    "steps": [
      20833333,
      41666666,
      62500000,
      83333333,
      104166665,
      125000000,
      125000000,
      145833333,
      166666667,
      187500000,
      208333333
    ],
    "expected_frames_per_step": [
      999,
      1000,
      1001,
      999,
      1000,
      1001,
      0,
      999,
      1001,
      1000,
      999
    ],
    "expected_final_frac": 999984000
  },
  {
    "name": "48kHz_large_delta_500ms",
    "sample_rate_hz": 48000,
    "start_time_ns": 0,
    "steps": [
      500000001,
      500000001,
      1000000002,
      1500000002,
      2000000003
    ],
    "expected_frames_per_step": [
      24000,
      0,
      24000,
      24000,
      24000
    ],
    "expected_final_frac": 144000
  },
  {
    "name": "48kHz_large_absolute_timestamps_near_js_max_safe_integer",
    "sample_rate_hz": 48000,
    "start_time_ns": 9000000000000000,
    "steps": [
      9000000000000000,
      9000000016666667,
      9000000033333333,
      8999999900000000,
      9000000050000000,
      9000000550000000,
      9000000550000000,
      9000001550000000
    ],
    "expected_frames_per_step": [
      0,
      800,
      799,
      0,
      801,
      24000,
      0,
      48000
    ],
    "expected_final_frac": 0
  },
  {
    "name": "44_1kHz_mixed_small_and_large",
    "sample_rate_hz": 44100,
    "start_time_ns": 1000,
    "steps": [
      1000,
      1000,
      1001,
      1101,
      500001101,
      500001102,
      500001102,
      500023676,
      500023676,
      500046351
    ],
    "expected_frames_per_step": [
      0,
      0,
      0,
      0,
      22050,
      0,
      0,
      1,
      0,
      0
    ],
    "expected_final_frac": 999979100
  },
  {
    "name": "44_1kHz_1ms_steps_accumulate_fraction",
    "sample_rate_hz": 44100,
    "start_time_ns": 0,
    "steps": [
      0,
      1000000,
      2000000,
      3000000,
      4000000,
      5000000,
      6000000,
      7000000,
      8000000,
      9000000,
      10000000
    ],
    "expected_frames_per_step": [
      0,
      44,
      44,
      44,
      44,
      44,
      44,
      44,
      44,
      44,
      45
    ],
    "expected_final_frac": 0
  },
  {
    "name": "96kHz_multi_second_deltas_with_remainder",
    "sample_rate_hz": 96000,
    "start_time_ns": 0,
    "steps": [
      2000000000,
      2000000001,
      5000000000,
      5000000123
    ],
    "expected_frames_per_step": [
      192000,
      0,
      288000,
      0
    ],
    "expected_final_frac": 11808000
  }
]
