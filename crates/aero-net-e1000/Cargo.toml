[package]
name = "aero-net-e1000"
version = "0.1.0"
edition = "2021"
license = "MIT OR Apache-2.0"

[lib]
path = "src/lib.rs"

[features]
# Snapshot/restore is a core part of the emulator/machine integration, so enable it by default.
# Downstream users that don't need snapshot support can disable default features.
default = ["io-snapshot"]
io-snapshot = ["dep:aero-io-snapshot"]

[dependencies]
aero-io-snapshot = { path = "../aero-io-snapshot", optional = true }
memory = { path = "../memory" }
nt-packetlib = { path = "../nt-packetlib" }

[dev-dependencies]
aero-io-snapshot = { path = "../aero-io-snapshot" }
aero-devices = { path = "../devices" }

[[test]]
name = "snapshot"
path = "tests/snapshot.rs"
required-features = ["io-snapshot"]

[[test]]
name = "snapshot_roundtrip"
path = "tests/snapshot_roundtrip.rs"
required-features = ["io-snapshot"]

[[test]]
name = "e1000_snapshot_roundtrip"
path = "tests/e1000_snapshot_roundtrip.rs"
required-features = ["io-snapshot"]

[[test]]
name = "host_queue_runtime_bounds"
path = "tests/host_queue_runtime_bounds.rs"
required-features = ["io-snapshot"]

[[test]]
name = "host_queue_restore_bounds"
path = "tests/host_queue_restore_bounds.rs"
required-features = ["io-snapshot"]
