// Expected Win7 D3D10/11 UMD ABI values when building against the Windows WDK DDI
// headers (d3dumddi.h / d3d10umddi.h / d3d10_1umddi.h / d3d11umddi.h).
//
// This header is a **checked-in source of truth** for a small set of
// ABI-critical sizes/offsets and x86 stdcall export decoration. It is used by
// `aerogpu_d3d10_11_wdk_abi_asserts.h` when
// `AEROGPU_D3D10_11_WDK_ABI_ENFORCE_EXPECTED` is defined.
//
// Values must be regenerated by running:
//   drivers/aerogpu/umd/d3d10_11/tools/wdk_abi_probe/
// against the same WDK headers used by CI (see `ci/install-wdk.ps1`).
//
// Tip: after capturing probe output for both architectures, you can regenerate
// this file automatically with:
//   drivers/aerogpu/umd/d3d10_11/tools/wdk_abi_probe/gen_expected_header.py
//     - pass `--allow-na` to tolerate optional members reported as `<n/a>`
//     - pass `--all` to emit all parsed sizeof/offsetof macros (not just curated anchors)
//
// NOTE: This file intentionally contains only preprocessor `#define`s so it can be
// included from any translation unit without pulling in additional headers.
//
// clang-format off
//
// Last regenerated against:
//   - Windows WDK: 10.0.22621.0 (CI default)
//
// clang-format on

#pragma once

#if !(defined(AEROGPU_UMD_USE_WDK_HEADERS) && AEROGPU_UMD_USE_WDK_HEADERS)
  #error "aerogpu_d3d10_11_wdk_abi_expected.h is only valid for WDK DDI builds (set AEROGPU_UMD_USE_WDK_HEADERS=1)."
#endif

// -----------------------------------------------------------------------------
// x86 (Win32 / WOW64)
// -----------------------------------------------------------------------------
#if defined(_M_IX86)

  // Exported entrypoints (x86 stdcall decoration).
  // These must match `drivers/aerogpu/umd/d3d10_11/aerogpu_d3d10_x86.def`.
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OPENADAPTER10_STDCALL_BYTES 4
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OPENADAPTER10_2_STDCALL_BYTES 4
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OPENADAPTER11_STDCALL_BYTES 4

  // OpenAdapter arg struct (runtime -> UMD).
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_SIZEOF_D3D10DDIARG_OPENADAPTER 24
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D10DDIARG_OPENADAPTER_Interface 0
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D10DDIARG_OPENADAPTER_Version 4
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D10DDIARG_OPENADAPTER_hRTAdapter 8
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D10DDIARG_OPENADAPTER_hAdapter 12
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D10DDIARG_OPENADAPTER_pAdapterCallbacks 16
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D10DDIARG_OPENADAPTER_pAdapterFuncs 20

  // Adapter function tables (UMD -> runtime).
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_SIZEOF_D3D10DDI_ADAPTERFUNCS 16
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D10DDI_ADAPTERFUNCS_pfnGetCaps 0
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D10DDI_ADAPTERFUNCS_pfnCalcPrivateDeviceSize 4
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D10DDI_ADAPTERFUNCS_pfnCreateDevice 8
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D10DDI_ADAPTERFUNCS_pfnCloseAdapter 12

  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_SIZEOF_D3D10_1DDI_ADAPTERFUNCS 16
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D10_1DDI_ADAPTERFUNCS_pfnGetCaps 0
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D10_1DDI_ADAPTERFUNCS_pfnCalcPrivateDeviceSize 4
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D10_1DDI_ADAPTERFUNCS_pfnCreateDevice 8
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D10_1DDI_ADAPTERFUNCS_pfnCloseAdapter 12

  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_SIZEOF_D3D11DDI_ADAPTERFUNCS 20
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D11DDI_ADAPTERFUNCS_pfnGetCaps 0
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D11DDI_ADAPTERFUNCS_pfnCalcPrivateDeviceSize 4
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D11DDI_ADAPTERFUNCS_pfnCalcPrivateDeviceContextSize 8
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D11DDI_ADAPTERFUNCS_pfnCreateDevice 12
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D11DDI_ADAPTERFUNCS_pfnCloseAdapter 16

  // Device function tables (UMD -> runtime). These are densely-packed function-pointer tables; a size mismatch
  // can lead to runtime memory corruption when the UMD copies the table into runtime-owned storage.
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_SIZEOF_D3D10DDI_DEVICEFUNCS 416
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D10DDI_DEVICEFUNCS_pfnDestroyDevice 0
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D10DDI_DEVICEFUNCS_pfnCreateResource 8
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D10DDI_DEVICEFUNCS_pfnPresent 288
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D10DDI_DEVICEFUNCS_pfnFlush 292
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D10DDI_DEVICEFUNCS_pfnRotateResourceIdentities 296
 
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_SIZEOF_D3D10_1DDI_DEVICEFUNCS 416
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D10_1DDI_DEVICEFUNCS_pfnDestroyDevice 0
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D10_1DDI_DEVICEFUNCS_pfnCreateResource 8
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D10_1DDI_DEVICEFUNCS_pfnPresent 288
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D10_1DDI_DEVICEFUNCS_pfnFlush 292
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D10_1DDI_DEVICEFUNCS_pfnRotateResourceIdentities 296
 
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_SIZEOF_D3D11DDI_DEVICEFUNCS 348
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D11DDI_DEVICEFUNCS_pfnDestroyDevice 0
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D11DDI_DEVICEFUNCS_pfnCreateResource 8
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D11DDI_DEVICEFUNCS_pfnPresent 312
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D11DDI_DEVICEFUNCS_pfnRotateResourceIdentities 316
 
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_SIZEOF_D3D11DDI_DEVICECONTEXTFUNCS 340
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D11DDI_DEVICECONTEXTFUNCS_pfnVsSetShader 0
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D11DDI_DEVICECONTEXTFUNCS_pfnDraw 152
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D11DDI_DEVICECONTEXTFUNCS_pfnFlush 308
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D11DDI_DEVICECONTEXTFUNCS_pfnPresent 312
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D11DDI_DEVICECONTEXTFUNCS_pfnRotateResourceIdentities 316

// -----------------------------------------------------------------------------
// x64 (Win64)
// -----------------------------------------------------------------------------
#elif defined(_M_X64) || defined(_M_AMD64)

  // OpenAdapter arg struct (runtime -> UMD).
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_SIZEOF_D3D10DDIARG_OPENADAPTER 40
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D10DDIARG_OPENADAPTER_Interface 0
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D10DDIARG_OPENADAPTER_Version 4
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D10DDIARG_OPENADAPTER_hRTAdapter 8
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D10DDIARG_OPENADAPTER_hAdapter 16
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D10DDIARG_OPENADAPTER_pAdapterCallbacks 24
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D10DDIARG_OPENADAPTER_pAdapterFuncs 32

  // Adapter function tables (UMD -> runtime).
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_SIZEOF_D3D10DDI_ADAPTERFUNCS 32
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D10DDI_ADAPTERFUNCS_pfnGetCaps 0
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D10DDI_ADAPTERFUNCS_pfnCalcPrivateDeviceSize 8
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D10DDI_ADAPTERFUNCS_pfnCreateDevice 16
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D10DDI_ADAPTERFUNCS_pfnCloseAdapter 24

  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_SIZEOF_D3D10_1DDI_ADAPTERFUNCS 32
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D10_1DDI_ADAPTERFUNCS_pfnGetCaps 0
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D10_1DDI_ADAPTERFUNCS_pfnCalcPrivateDeviceSize 8
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D10_1DDI_ADAPTERFUNCS_pfnCreateDevice 16
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D10_1DDI_ADAPTERFUNCS_pfnCloseAdapter 24

  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_SIZEOF_D3D11DDI_ADAPTERFUNCS 40
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D11DDI_ADAPTERFUNCS_pfnGetCaps 0
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D11DDI_ADAPTERFUNCS_pfnCalcPrivateDeviceSize 8
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D11DDI_ADAPTERFUNCS_pfnCalcPrivateDeviceContextSize 16
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D11DDI_ADAPTERFUNCS_pfnCreateDevice 24
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D11DDI_ADAPTERFUNCS_pfnCloseAdapter 32

  // Device function tables (UMD -> runtime).
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_SIZEOF_D3D10DDI_DEVICEFUNCS 832
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D10DDI_DEVICEFUNCS_pfnDestroyDevice 0
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D10DDI_DEVICEFUNCS_pfnCreateResource 16
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D10DDI_DEVICEFUNCS_pfnPresent 576
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D10DDI_DEVICEFUNCS_pfnFlush 584
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D10DDI_DEVICEFUNCS_pfnRotateResourceIdentities 592
 
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_SIZEOF_D3D10_1DDI_DEVICEFUNCS 832
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D10_1DDI_DEVICEFUNCS_pfnDestroyDevice 0
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D10_1DDI_DEVICEFUNCS_pfnCreateResource 16
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D10_1DDI_DEVICEFUNCS_pfnPresent 576
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D10_1DDI_DEVICEFUNCS_pfnFlush 584
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D10_1DDI_DEVICEFUNCS_pfnRotateResourceIdentities 592
 
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_SIZEOF_D3D11DDI_DEVICEFUNCS 696
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D11DDI_DEVICEFUNCS_pfnDestroyDevice 0
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D11DDI_DEVICEFUNCS_pfnCreateResource 16
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D11DDI_DEVICEFUNCS_pfnPresent 624
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D11DDI_DEVICEFUNCS_pfnRotateResourceIdentities 632
 
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_SIZEOF_D3D11DDI_DEVICECONTEXTFUNCS 680
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D11DDI_DEVICECONTEXTFUNCS_pfnVsSetShader 0
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D11DDI_DEVICECONTEXTFUNCS_pfnDraw 304
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D11DDI_DEVICECONTEXTFUNCS_pfnFlush 616
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D11DDI_DEVICECONTEXTFUNCS_pfnPresent 624
  #define AEROGPU_D3D10_11_WDK_ABI_EXPECT_OFFSETOF_D3D11DDI_DEVICECONTEXTFUNCS_pfnRotateResourceIdentities 632

#else
  #error "Unsupported architecture for AeroGPU D3D10/11 WDK ABI expected values."
#endif
