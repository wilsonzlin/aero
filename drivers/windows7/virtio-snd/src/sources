# SPDX-License-Identifier: MIT OR Apache-2.0
#
# Aero virtio-snd (Windows 7) - clean-room PortCls (WaveRT) audio driver.
#
# Build with the WDK 7600/7.1 "build" utility from:
#   drivers\windows7\virtio-snd
#
# x86: use the Win7 x86 Free/Checked build environment.
# x64: use the Win7 x64 Free/Checked build environment.

TARGETNAME=virtiosnd
TARGETTYPE=DRIVER
TARGETPATH=obj

INCLUDES=$(INCLUDES);..\include;..\..\virtio\common\include;..\..\..\win7\virtio\virtio-core\include;..\..\..\win7\virtio\virtio-core\portable

TARGETLIBS=$(TARGETLIBS) \
  $(DDK_LIB_PATH)\portcls.lib \
  $(DDK_LIB_PATH)\ks.lib

SOURCES= \
    adapter.c \
    topology.c \
    wavert.c \
    backend_null.c \
    backend_virtio.c \
    pci_interface.c \
    virtio_pci_modern_wdm.c \
    virtio_snd_proto.c \
    virtiosnd_control.c \
    virtiosnd_dma.c \
    virtiosnd_hw.c \
    virtiosnd_intx.c \
    virtiosnd_queue_split.c \
    virtiosnd_rx.c \
    virtiosnd_sg.c \
    virtiosnd_sg_core.c \
    virtiosnd_sg_tx.c \
    virtiosnd_tx.c \
    ..\..\..\windows\virtio\common\virtqueue_split.c \
    ..\..\..\win7\virtio\virtio-core\portable\virtio_pci_cap_parser.c
