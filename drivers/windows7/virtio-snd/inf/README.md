<!-- SPDX-License-Identifier: MIT OR Apache-2.0 -->

# `inf/` - driver package staging directory

This folder is intended to be the **exact directory you point Windows to** during installation:

- Device Manager → **Have Disk…** → select the desired `*.inf`
- `pnputil -i -a <path-to-inf>` (Windows 7)

In a finished package, this directory contains the driver package payload:

- One or more driver binaries (built output; copied in manually from the WDK build output):
  - `virtiosnd.sys` (Aero contract v1 build)
  - `virtiosnd_legacy.sys` (optional transitional/QEMU build)
- Installable INF(s):
  - `aero-virtio-snd.inf` (primary INF; strict Aero contract v1 match: `DEV_1059&REV_01`; recommended)
  - `aero-virtio-snd-legacy.inf` (optional QEMU/transitional INF: `DEV_1018`, no `REV_01` requirement)
  - (Optional) `virtio-snd.inf` legacy filename alias (rename `virtio-snd.inf.disabled` back to `virtio-snd.inf` to enable; kept for compatibility with older tooling/workflows; installs the same driver/service and matches the same contract-v1 HWIDs, but uses `CatalogFile = virtio-snd.cat`)
- Catalog(s) (generated by `Inf2Cat` and then signed):
  - `aero-virtio-snd.cat`
  - `aero-virtio-snd-legacy.cat`
  - (Optional) `virtio-snd.cat` if `virtio-snd.inf` is present

> `Inf2Cat` hashes every file referenced by each INF. That means the referenced `*.sys` must exist
> in this folder before running `..\scripts\make-cat.cmd`.

## Notes

- `..\scripts\make-cat.cmd` and `..\scripts\sign-driver.cmd` default to the **contract v1** package
  (`virtiosnd.sys` + `aero-virtio-snd*.inf`). Pass `legacy` to target the transitional/QEMU package
  (`virtiosnd_legacy.sys` + `aero-virtio-snd-legacy.inf`).
- The legacy alias INF is checked in as `virtio-snd.inf.disabled` to avoid accidentally shipping/installing **two**
  INFs that match the same HWIDs.
