<!-- SPDX-License-Identifier: MIT OR Apache-2.0 -->

# `inf/` - driver package staging directory

This folder is intended to be the **exact directory you point Windows to** during installation:

- Device Manager → **Have Disk…** → select the desired `*.inf`
- `pnputil -i -a <path-to-inf>` (Windows 7)

In a finished package, this directory contains the driver package payload:

- One or more driver binaries (built output; copied in manually from the build output):
  - `aero_virtio_snd.sys` (Aero contract v1 build)
  - `virtiosnd_legacy.sys` (optional transitional/QEMU build)
  - `virtiosnd_ioport.sys` (optional legacy virtio-pci I/O-port build; bring-up only)
- Installable INF(s):
  - `aero_virtio_snd.inf` (primary INF; strict `AERO-W7-VIRTIO` v1 binding: `PCI\VEN_1AF4&DEV_1059&REV_01`; recommended; installs service `aero_virtio_snd`)
  - `aero-virtio-snd-legacy.inf` (optional QEMU compatibility package; binds the transitional virtio-snd PCI ID `PCI\VEN_1AF4&DEV_1018`; installs `virtiosnd_legacy.sys` + service `aeroviosnd_legacy`)
  - `aero-virtio-snd-ioport.inf` (optional legacy virtio-pci I/O-port transport package; binds `PCI\VEN_1AF4&DEV_1018&REV_00`; installs `virtiosnd_ioport.sys` + service `aeroviosnd_ioport`)
  - (Optional) `virtio-snd.inf` legacy filename alias (rename `virtio-snd.inf.disabled` back to `virtio-snd.inf` to enable; kept for compatibility with older tooling/workflows; installs the same driver/service as `aero_virtio_snd.inf` and matches the same contract-v1 HWIDs, but uses `CatalogFile = aero_virtio_snd.cat`)
- Catalog(s) (generated by `Inf2Cat` and then signed):
  - `aero_virtio_snd.cat`
  - `aero-virtio-snd-legacy.cat`
  - `aero-virtio-snd-ioport.cat` (if `aero-virtio-snd-ioport.inf` is used)

> `Inf2Cat` hashes every file referenced by each INF. That means the referenced `*.sys` must exist in this folder before running `..\scripts\make-cat.cmd`.

## Notes

- `..\scripts\make-cat.cmd` and `..\scripts\sign-driver.cmd` default to the **contract v1** package
  (`aero_virtio_snd.sys` + `aero_virtio_snd.inf`). Pass `legacy` to target the transitional/QEMU package
  (`virtiosnd_legacy.sys` + `aero-virtio-snd-legacy.inf`, service `aeroviosnd_legacy`).
- The legacy I/O-port bring-up package (`aero-virtio-snd-ioport.inf`, service `aeroviosnd_ioport`) is opt-in and not currently covered by the helper scripts.
- The legacy alias INF is checked in as `virtio-snd.inf.disabled` to avoid accidentally shipping/installing **two**
  INFs that match the same HWIDs.
