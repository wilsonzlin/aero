# Aero virtio-snd (Windows 7) release packaging

`../scripts/package-release.ps1` stages an installable driver folder (and can optionally create a deterministic zip) from the payload files in `../inf/`.

The intent is that `inf/` contains **exactly what you would provide to Device Manager (“Have Disk…”)**:

- `aero-virtio-snd.inf`
- `aero-virtio-snd.cat` (optional; generated by `Inf2Cat`, then signed)
- `virtiosnd.sys` (built output; copied into `inf/`, then signed)
- Any additional driver package payload files you add later (for example, coinstallers)

## Output layout

The default staging output is:

```text
release\<arch>\virtio-snd\
```

Where `<arch>` is auto-detected from `virtiosnd.sys` (`x86` or `amd64`).

## Usage

From the repository root:

```powershell
# Stage into release\<arch>\virtio-snd\
powershell -ExecutionPolicy Bypass -File drivers/windows7/virtio-snd/scripts/package-release.ps1

# Force an arch label (and validate virtiosnd.sys matches it)
powershell -ExecutionPolicy Bypass -File drivers/windows7/virtio-snd/scripts/package-release.ps1 -Arch amd64
```

### Optional: deterministic zip bundle

To also emit a deterministic zip into `release/out/`:

```powershell
powershell -ExecutionPolicy Bypass -File drivers/windows7/virtio-snd/scripts/package-release.ps1 -Zip `
  -OutDir drivers/windows7/virtio-snd/release/out
```

Generated `release/x86/`, `release/amd64/`, `release/out/`, and `*.zip` files are ignored by git (see `release/.gitignore`).
