1. Gateway URL:
   {{- if .Values.ingress.enabled }}
   {{- if .Values.ingress.tls.enabled }}
   https://{{ .Values.ingress.host }}
   {{- else }}
   http://{{ .Values.ingress.host }}
   {{- end }}
   {{- else }}
   (Ingress disabled; use kubectl port-forward or expose the Service)
   {{- end }}

{{- if and .Values.secrets.create (eq (index .Values.secrets.data "SESSION_SECRET") "__REPLACE_ME__") }}
NOTE: You are deploying with a placeholder SESSION_SECRET. For production, set secrets.data.SESSION_SECRET
      to a real value or set secrets.create=false and provide secrets.existingSecret.
{{- end }}

2. Verify COOP/COEP headers (required for SharedArrayBuffer):
   {{- if .Values.ingress.tls.enabled }}
   curl -sI https://{{ .Values.ingress.host }}/ | egrep -i 'cross-origin-(opener|embedder|resource)-policy|origin-agent-cluster'
   {{- else }}
   curl -sI http://{{ .Values.ingress.host }}/ | egrep -i 'cross-origin-(opener|embedder|resource)-policy|origin-agent-cluster'
   {{- end }}

3. Verify WebSocket handshake:
   {{- if .Values.ingress.tls.enabled }}
   websocat -v 'wss://{{ .Values.ingress.host }}/tcp?v=1&host=example.com&port=80'
   {{- else }}
   websocat -v 'ws://{{ .Values.ingress.host }}/tcp?v=1&host=example.com&port=80'
   {{- end }}
