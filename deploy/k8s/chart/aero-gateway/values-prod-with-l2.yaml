# Example values for production clusters using Option C (L2 tunnel proxy).
# Copy this file locally and replace placeholders before deploying.

gateway:
  replicaCount: 2
  image:
    tag: "<REPLACE_WITH_GATEWAY_IMAGE_TAG>"
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: "1"
      memory: 512Mi

l2Proxy:
  enabled: true
  image:
    tag: "<REPLACE_WITH_L2_PROXY_IMAGE_TAG>"
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: "1"
      memory: 512Mi
  # The chart will automatically set ALLOWED_ORIGINS to the derived ingress origin
  # (https://<ingress.host> when TLS is enabled) and route `/l2` to the proxy.
  #
  # Recommended: use session-cookie auth for same-origin browser clients.
  # This requires the proxy to share the gateway `SESSION_SECRET`; the chart mounts it as both
  # `SESSION_SECRET` and `AERO_L2_SESSION_SECRET`.
  auth:
    mode: "session"

# Optional: override L2 tunnel payload limits (bytes).
# These are enforced by `aero-l2-proxy` and surfaced to clients via `POST /session` `limits.l2.*`.
# Keep gateway + proxy in sync by setting them here (so both Deployments get the same env vars).
#l2Tunnel:
#  maxFramePayloadBytes: 2048
#  maxControlPayloadBytes: 256

podDisruptionBudget:
  enabled: true
  minAvailable: 1

ingress:
  host: "aero.example.com"
  tls:
    enabled: true
    secretName: "aero-tls"

# Recommended for multi-replica deployments.
redis:
  enabled: true

secrets:
  data:
    SESSION_SECRET: "<REPLACE_WITH_RANDOM_SECRET>"
