# Repo-tracked Cargo config.
#
# Keep this file minimal to avoid impacting CI. Agent-only build/memory limits are
# applied via environment variables in `scripts/agent-env.sh`.

[env]
# Some environments configure Cargo to use `sccache` via a global Cargo config. In
# ephemeral agent sandboxes the sccache server is not always available, which
# causes *all* cargo commands to fail before compilation even starts.
#
# Default to no rustc wrapper for this repo. Developers/CI that want sccache can
# opt back in by setting `CARGO_BUILD_RUSTC_WRAPPER=sccache` in their shell.
CARGO_BUILD_RUSTC_WRAPPER = ""
#
# Some sandbox environments ship with a broken `sccache` wrapper via environment
# variables. Keep this in addition to the `[build]` override below so `cargo`
# invocations from within the repo are resilient even when `RUSTC_WRAPPER` is
# exported globally.
RUSTC_WRAPPER = ""

# Some sandbox environments ship with a broken `sccache` wrapper via environment
# variables. Keep this in addition to the `[build]` override below so `cargo`
# invocations from within the repo are resilient even when `RUSTC_WRAPPER` is
# exported globally.
RUSTC_WRAPPER = ""

[alias]
# `cargo xtask <subcommand>` is shorthand for running the `xtask` helper binary.
xtask = "run --locked -p xtask --"

[build]
# Some sandbox environments configure `build.rustc-wrapper = "sccache"` globally.
# When that daemon/socket is broken, Cargo will fail before compiling anything.
#
# Setting an explicit (empty) wrapper here overrides any inherited global config.
# Developers can still opt back in by exporting `RUSTC_WRAPPER=sccache` or setting
# `build.rustc-wrapper` in a higher-precedence config.
rustc-wrapper = ""
